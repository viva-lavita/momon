## Склерозник

#### Как работает аутентификация

1. Адрес по которому можно получить токен - указана в переменной oauth2_scheme.
2. В openai можно через форму в замке авторизоваться по логину и паролю, приложение само сходит по нужному адресу, возьмет токен и запомнит его. Автоирзовываться нужно лишь раз - через эту форму.
3. В проде данные формы (логин-пароль) отправляются по этому адресу, стандартно берется токен, фронт сам его хранит. Токен сейчас действителен 8 дней. Изменения стандартно, через env и конфиг.
4. Адреса:
    - /auth/test-token - для тестирования авторизации, возвращает текущего юзера, если он авторизован и 401 если нет.
    - /auth/password-recovery/{email} - отправка сообщения с восстановлением доступа по эмейл. Настроено. Токен из письма действителен сейчас 48 часов. Ссылка отправляет на сервер фронта, токеном в параметрах.
    - /auth/reset-password/ -  смена пароля для аутентифицированного юзера. Тело - токен и новый пароль.
    - /auth/password-recovery-html-content/{email} - возвращает шаблон для смены пароля.


#### Как пользоваться шаблонами для почты
Шаблоны электронной почты находятся в каталоге ./backend/src/email-templates/. Здесь есть две директории: build и src. Каталог src содержит исходные файлы, которые используются для создания окончательных шаблонов электронной почты. Каталог build содержит конечные шаблоны электронной почты, которые используются приложением.

Прежде чем продолжить, убедитесь, что расширение MJML установлено в вашем VS Code.

После установки расширения MJML вы можете создать новый шаблон электронной почты в каталоге src. После создания нового шаблона электронной почты и открытия файла .mjml в редакторе, откройте палитру команд с помощью Ctrl+Shift+P и найдите MJML: Export to HTML. Это преобразует файл .mjml в файл .html, и теперь вы можете сохранить его в директории сборки.
